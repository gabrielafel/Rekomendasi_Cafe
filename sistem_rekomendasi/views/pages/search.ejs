<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/paginationjs@2.1.5/dist/pagination.min.js"
    integrity="sha256-c3ZuGOHCmmMhPJlzMcCMogPfs0n1+cpQLeSD4rZTylg=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/paginationjs@2.1.5/dist/pagination.css"
    integrity="sha256-fFqxRJ9q487bQTOBfn4T8jkJt8IGlrVzTeauNnuRHVA=" crossorigin="anonymous">
    <style>
      body{
        background-image: url(image/background/bgcafejakarta.jpg);
      }
    </style>
    <title>Cafe Di Jakarta</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-dark">
      <div class="container">
        <ul class="navbar-nav ml-1 mr-1 nav-fill">
          <li class="nav-item active">
            <a class="nav-link text-white" href="/" style="margin-left: 10px; margin-right: 10px;">Home <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item active">
            <a class="nav-link text-white" href="/search" style="margin-left: 10px; margin-right: 10px;">Cafe di Jakarta</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link text-white" href="/rekomendasi" style="margin-left: 10px; margin-right: 10px;">Rekomendasi Cafe</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link text-white" href="/bantuan" style="margin-left: 10px; margin-right: 10px;">Bantuan</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link text-white" href="/about" style="margin-left: 10px; margin-right: 10px;">About Us</a>
          </li>
          <li class="nav-item active">
            <a class="nav-link text-white" href="/admin" style="margin-left: 10px; margin-right: 10px;">Admin</a>
          </li>
        </ul>
      </div>
    </nav> 

    <h1 style="text-align: center; margin-top: 20px; margin-bottom: 20px;"> CAFE DI JAKARTA BARAT</h1>
    
    <div class="col-lg">
      <form class="d-flex">
        <input class="form-control me-2" type="search" name="Search" id="Search" placeholder="Search" aria-label="Search" style="width: 8cm; margin-right: 5px;">
        <button class="btn btn-outline-success" type="submit" onclick="search()" style="margin-bottom: 20px;">Search</button>
      </form>
      <% if (locals.message) { %>
        <%= locals.message %>
      <% } %>
      <% if (locals.availablePages && parseFloat(locals.availablePages)> 0) { %>
        <div id="pagination">
          <% for (let i=0; i < 10; i++) { %>
            <div id="cafe<%= i %>"></div>
            <% } %>
        </div>
        <% } %>
      
    </div>
    <script>
      <% if (locals.availablePages && parseFloat(locals.availablePages) > 0) { %>
      datas =[
      <% for (i in finalList) { %>
        `<div class='media'>
          <img class='mr-3' src='/cafe/images/<%= finalList[i].imagesurl %>' alt='Generic placeholder image'
            style='width: 5cm;height: 5cm;'>
          <div class='media-body'>
            <h5 class='mt-0'>
              <a href="/detailcafe/<%= finalList[i]["id"] %>"><%= finalList[i].Nama %></a>
            </h5>
            <p>Address: <%= finalList[i].Address %> <br>
            </p>
          </div>
        </div>`
        <% if (i != finalList.length - 1) { %> 
        ,
        <% } %>
      <% } %>
    ];

      $('#pagination').pagination({
        dataSource: datas,
        pageSize: 10,
        showPrevious: false,
        showNext: false,
        callback: function (data, pagination) {
          // template method of yourself
          var html = data;
          console.log(data);
          for (let i = 0; i < 10; i++) {
            if (i < data.length) {
              $('#cafe' + i).html(data[i]);
            } else {
              $('#cafe' + i).html('');
            }
          }
        }
      });
    <% } %>
    </script>
</body>
</html>
